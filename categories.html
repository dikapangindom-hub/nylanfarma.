<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kategori Produk — Nylan Farma</title>

  <!-- Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Feather icons -->
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* tambahan styling khusus kategori (agar rapi) */
    .cat-page { padding: 6.5rem 7% 4rem; min-height: 80vh; background: #fff; }
    .cat-container { max-width:1100px; margin:0 auto; }
    .cat-title { font-size:2rem; font-weight:700; color:var(--primary-dark); margin-bottom:0.6rem; }
    .cat-sub { color:#555; margin-bottom:1.6rem; }
    .cat-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; }
    .cat-card {
      background:#fff;
      border-radius:12px;
      border:1px solid #f1e1c5;
      padding:1.1rem 1.2rem;
      box-shadow:0 8px 22px rgba(0,0,0,0.04);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .cat-card:hover { transform:translateY(-6px); box-shadow:0 12px 30px rgba(0,0,0,0.08); }
    .cat-card h3 { margin:0 0 .4rem; color:var(--primary-dark); font-size:1.05rem; }
    .cat-card p { margin:0; color:#444; font-size:0.95rem; line-height:1.4; }

    /* tombol kecil untuk buka detail di menu.html (opsional) */
    .cat-actions { margin-top:.8rem; display:flex; gap:.6rem; flex-wrap:wrap; }
    .btn-sm {
      padding:.45rem .8rem; border-radius:999px; font-weight:600; font-size:.9rem;
      background:var(--primary); color:#fff; text-decoration:none;
    }
    .btn-outline { padding:.45rem .8rem; border-radius:999px; border:1px solid var(--primary); color:var(--primary-dark); text-decoration:none; }
  </style>
</head>
<body>

  <div class="top-strip"></div>

  <!-- navbar - copy dari index supaya konsisten -->
  <nav class="navbar">
    <a href="index.html" class="navbar-logo">
      <img src="image/logo-img.png" alt="Logo Nylan" class="logo-img">
      <span class="brand-text">NylanFarma.</span>
    </a>

    <div class="navbar-nav">
      <a href="index.html">Home</a>
      <a href="about.html">Tentang Kami</a>

      <div class="nav-item dropdown">
        <a href="menu.html" class="has-dropdown">Produk</a>
        <div class="dropdown-menu">
          <a href="menu.html#produk">Semua Produk</a>
          <a href="menu.html#obat-resep">Obat Resep Dokter</a>
          <a href="menu.html#vitamin">Vitamin</a>
        </div>
      </div>

      <div class="nav-item dropdown">
        <a href="#" class="has-dropdown">Layanan</a>
        <div class="dropdown-menu">
          <a href="manufaktur.html">Manufaktur Produk</a>
          <a href="lab.html">Pengujian Laboratorium</a>
          <a href="komplain.html">Komplain Produk/Jasa</a>
        </div>
      </div>

      <!doctype html>
      <html lang="id">
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Checkout / Pesanan — Nylan Farma</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
        <link rel="stylesheet" href="css/style.css" />

        <style>
          .checkout-page { padding: 4rem 7%; min-height:60vh; background:#fff; }
          .checkout-container{ max-width:1100px; margin:0 auto; display:grid; grid-template-columns:1fr 350px; gap:2rem; }
          .order-list{ display:flex; flex-direction:column; gap:1rem; }
          .order-item{ display:flex; gap:1rem; align-items:center; background:#f9f8f5; padding:1rem; border-radius:10px; border:1px solid #f1e1c5; }
          .order-item img{ width:96px; height:72px; object-fit:cover; border-radius:6px; }
          .order-item h4{ margin:0; font-size:1rem; }
          .order-item p{ margin:0; color:#666; font-size:0.9rem }
          .order-summary{ background:#fdfaf5; padding:1.2rem; border-radius:10px; border:1px solid #f1e1c5 }
          .summary-row{ display:flex; justify-content:space-between; margin-bottom:0.8rem }
          .btn-clear{ background:#e74c3c; color:white; border-radius:8px; padding:0.6rem; border:none; cursor:pointer }
          @media (max-width: 1024px){ .checkout-container{ grid-template-columns:1fr } }
        </style>
      </head>
      <body>

        <div class="top-strip"></div>
        <nav class="navbar">
          <a href="index.html" class="navbar-logo">
            <img src="image/logo-img.png" class="logo-img" />
            <span class="brand-text">NylanFarma.</span>
          </a>
          <div class="navbar-nav">
            <a href="index.html">Home</a>
            <a href="menu.html">Produk & Layanan</a>
            <a href="#contact">Kontak</a>
          </div>
          <div class="navbar-extra">
            <a><i data-feather="search"></i></a>
            <a href="categories.html"><i data-feather="shopping-cart"></i><span class="cart-count" id="cart-count">0</span></a>
            <button id="hamburger-menu"><i data-feather="menu"></i></button>
          </div>
        </nav>

        <main class="checkout-page">
          <div class="checkout-container">
            <div>
              <h1>Pesanan Anda</h1>
              <p id="order-desc">Tinjau item yang akan dibayar. Klik "Konfirmasi Pembayaran" untuk menyelesaikan.</p>

              <div id="order-list" class="order-list">
                <!-- items rendered here -->
              </div>

              <div id="no-items" style="display:none; text-align:center; padding:2rem;">
                <i data-feather="shopping-cart" style="width:56px;height:56px;color:#ccc"></i>
                <h3>Keranjang kosong</h3>
                <p>Belum ada pesanan. Silakan ke halaman <a href="menu.html">Produk</a>.</p>
              </div>
            </div>

            <aside>
              <div class="order-summary">
                <h3>Ringkasan Pesanan</h3>
                <div class="summary-row"><span>Subtotal</span><span id="subtotal">Rp 0</span></div>
                <div class="summary-row"><span>Pajak (10%)</span><span id="tax">Rp 0</span></div>
                <div class="summary-row"><span>Diskon</span><span id="discount">Rp 0</span></div>
                <div class="summary-row total"><strong>Total</strong><strong id="total">Rp 0</strong></div>
                <button id="confirm-btn" class="btn-primary" style="width:100%; margin-top:1rem">Konfirmasi Pembayaran</button>
                <button id="clear-btn" class="btn-clear" style="width:100%; margin-top:0.6rem">Bersihkan Keranjang</button>
              </div>

              <div style="margin-top:1rem;">
                <h4>Riwayat Pesanan</h4>
                <div id="orders-history" style="margin-top:0.6rem"></div>
              </div>
            </aside>
          </div>
        </main>

        <footer class="footer-gold">
          <div class="footer-inner">
            <div class="footer-brand">
              <img src="image/logo-img.png" class="footer-logo" />
              <p class="footer-brand-name">NylanFarma.</p>
            </div>
            <div class="footer-cols">
              <div class="footer-col"><h4>Lokasi Perusahaan</h4><p>Kawasan Industri Gandus, Blok C-12<br/>Palembang, Sumatera Selatan</p></div>
              <div class="footer-col"><h4>Email Resmi</h4><p>info@nylanfarma.id</p></div>
              <div class="footer-col"><h4>Jam Operasional</h4><p>Senin–Jumat: 08.00 – 17.00</p></div>
            </div>
            <p class="footer-copy">© 2024 Nylan Farma. All rights reserved.</p>
          </div>
        </footer>

        <script>
          function formatHarga(harga){
            return new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',minimumFractionDigits:0}).format(harga);
          }

          function renderOrderList(){
            const cart = JSON.parse(localStorage.getItem('cart'))||[];
            const list = document.getElementById('order-list');
            const noItems = document.getElementById('no-items');
            list.innerHTML = '';
            if(cart.length===0){ noItems.style.display='block'; document.querySelector('.order-summary').style.display='none'; return; }
            noItems.style.display='none'; document.querySelector('.order-summary').style.display='block';

            cart.forEach(item=>{
              const div = document.createElement('div'); div.className='order-item';
              div.innerHTML = `
                <img src="${item.image}" alt="${item.nama}">
                <div style="flex:1">
                  <h4>${item.nama}</h4>
                  <p>${formatHarga(item.harga)} × ${item.quantity} = <strong>${formatHarga(item.harga*item.quantity)}</strong></p>
                </div>
              `;
              list.appendChild(div);
            });

            updateSummary();
          }

          function updateSummary(){
            const cart = JSON.parse(localStorage.getItem('cart'))||[];
            const subtotal = cart.reduce((s,i)=>s + i.harga * i.quantity,0);
            const tax = Math.round(subtotal*0.1);
            const discount = 0;
            const total = subtotal + tax - discount;
            document.getElementById('subtotal').textContent = formatHarga(subtotal);
            document.getElementById('tax').textContent = formatHarga(tax);
            document.getElementById('discount').textContent = formatHarga(discount);
            document.getElementById('total').textContent = formatHarga(total);
          }

          function updateCartCount(){
            const cart = JSON.parse(localStorage.getItem('cart'))||[];
            const totalItems = cart.reduce((s,i)=>s + i.quantity,0);
            const el = document.getElementById('cart-count'); if(el) el.textContent = totalItems;
          }

          function saveOrder(){
            const cart = JSON.parse(localStorage.getItem('cart'))||[];
            if(cart.length===0){ alert('Keranjang kosong'); return; }
            const orders = JSON.parse(localStorage.getItem('orders'))||[];
            const subtotal = cart.reduce((s,i)=>s + i.harga * i.quantity,0);
            const tax = Math.round(subtotal*0.1);
            const total = subtotal + tax;
            const order = { id: 'ORD' + Date.now(), createdAt: new Date().toISOString(), items: cart, subtotal, tax, total };
            orders.unshift(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            localStorage.removeItem('cart');
            renderOrderList();
            renderOrdersHistory();
            updateCartCount();
            alert('Pembayaran berhasil. Terima kasih!');
          }

          function clearCart(){
            if(!confirm('Hapus semua item di keranjang?')) return;
            localStorage.removeItem('cart');
            renderOrderList();
            updateCartCount();
          }

          function renderOrdersHistory(){
            const orders = JSON.parse(localStorage.getItem('orders'))||[];
            const container = document.getElementById('orders-history'); container.innerHTML='';
            if(orders.length===0){ container.innerHTML='<p style="color:#666">Belum ada pesanan.</p>'; return; }
            orders.slice(0,5).forEach(o=>{
              const d = document.createElement('div'); d.style.padding='0.6rem 0'; d.style.borderBottom='1px dashed #eee';
              d.innerHTML = `<strong>${o.id}</strong><div style="font-size:0.9rem;color:#555">${new Date(o.createdAt).toLocaleString()}</div><div style="font-weight:700;margin-top:6px">${formatHarga(o.total)}</div>`;
              container.appendChild(d);
            });
          }

          document.addEventListener('DOMContentLoaded', ()=>{
            feather.replace();
            renderOrderList();
            renderOrdersHistory();
            updateCartCount();
            document.getElementById('confirm-btn').addEventListener('click', saveOrder);
            document.getElementById('clear-btn').addEventListener('click', clearCart);
          });
        </script>
      </body>
      </html>
